<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Python Collections</h2><aside><nav class="toc"><ol><li><a href="#built-in-collection-classes">Built-in Collection Classes</a></li><li><a href="#collection-classes-in-collections-module">Collection Classes in collections module</a><ol><li><a href="#namedtuple">namedtuple</a></li><li><a href="#deque">deque</a></li><li><a href="#chainmap">Chainmap</a></li><li><a href="#counter">Counter</a></li><li><a href="#ordereddict">OrderedDict</a></li><li><a href="#defaultdict">defaultdict</a></li><li><a href="#userdict">UserDict</a></li><li><a href="#userlist">UserList</a></li><li><a href="#userstring">UserString</a></li></ol></li></ol></nav></aside><article><p>Python provides four collection classes that do not need to import and nine more that can be imported from the collections module in the standard library. The table below summarizes these:</p><h2 id="built-in-collection-classes">Built-in Collection Classes</h2><p>Python provides four collection classes that do not need to be imported to use.</p><table><thead><tr><th>Collection Name</th><th>Mutable?</th><th>Ordered?</th><th>Allows Duplicates?</th><th>Can Index</th><th>Syntax</th></tr></thead><tbody><tr><td><code>list</code></td><td>yes</td><td>yes</td><td>yes</td><td>yes</td><td><code>[e1, e2, ...]</code></td></tr><tr><td><code>tuple</code></td><td>no</td><td>yes</td><td>yes</td><td>yes</td><td><code>(e1, e2, ...)</code></td></tr><tr><td><code>set</code></td><td>yes</td><td>no</td><td>no</td><td>no</td><td><code>{e1, e2, ...}</code></td></tr><tr><td><code>dict</code></td><td>yes</td><td>yes</td><td>yes</td><td>no</td><td><code>{k1: v1, k2: v2, ...}</code></td></tr></tbody></table><p>Why do these class names start with a lowercase letter?</p><p>For details on the <code>list</code> and <code>tuple</code> classes, see <a href="/blog/python/python-compared-to-js/#sequences">here</a>.</p><p>For details on the <code>set</code> class, see <a href="/blog/python/python-compared-to-js/#sets">here</a>.</p><p>For details on the <code>dict</code> class, see <a href="/blog/python/python-compared-to-js/#key-value-collections">here</a>.</p><h2 id="collection-classes-in-collections-module">Collection Classes in <code>collections</code> module</h2><p>The collections module in the Python standard library defines nine addition collection classes that most be imported to use.</p><table><thead><tr><th>Collection Name</th><th>Description</th></tr></thead><tbody><tr><td><code>namedtuple</code></td><td>function that creates a <code>tuple</code> subclass with named fields</td></tr><tr><td><code>deque</code></td><td>function that creates a <code>list</code>-like container with fast appends and pops on both ends</td></tr><tr><td><code>Chainmap</code></td><td>a <code>dict</code>-like view of multiple mappings</td></tr><tr><td><code>Counter</code></td><td><code>dict</code> subclass for counting hashable values</td></tr><tr><td><code>OrderedDict</code></td><td><code>dict</code> subclass that remembers the order in which entries were added</td></tr><tr><td><code>defaultdict</code></td><td><code>dict</code> subclass that calls a function to get missing values</td></tr><tr><td><code>UserDict</code></td><td>wrapper around <code>dict</code> objects for easier subclassing</td></tr><tr><td><code>UserList</code></td><td>wrapper around <code>list</code> objects for easier subclassing</td></tr><tr><td><code>UserString</code></td><td>wrapper around <code>string</code> objects for easier subclassing</td></tr></tbody></table><p>TODO: Is OrderedDict deprecated since dict now remembers insertion order?</p><h3 id="namedtuple"><code>namedtuple</code></h3><p>A <a href="https://docs.python.org/3/library/collections.html#collections.namedtuple" rel="noopener" target="_blank"><code>namedtuple</code></a> has all the features of a <code>tuple</code>, but differs in that each position has an associated name.</p><p>Here is an example of creating and using <code>namedtuple</code> instances:</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> collections <span class="token keyword">import</span> namedtuple<br><br><span class="token comment"># Define a namedtuple.</span><br>DogNT <span class="token operator">=</span> namedtuple<span class="token punctuation">(</span><span class="token string">'Dog'</span><span class="token punctuation">,</span> <span class="token string">'breed, name'</span><span class="token punctuation">)</span><br><br><span class="token comment"># Create an instance with positional arguments.</span><br>dog1 <span class="token operator">=</span> DogNT<span class="token punctuation">(</span><span class="token string">'Whippet'</span><span class="token punctuation">,</span> <span class="token string">'Comet'</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dog1<span class="token punctuation">)</span><br><br><span class="token comment"># Create an instance with named arguments.</span><br>dog2 <span class="token operator">=</span> DogNT<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Oscar'</span><span class="token punctuation">,</span> breed<span class="token operator">=</span><span class="token string">'German Shorthaired Pointer'</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dog2<span class="token punctuation">)</span><br><br><span class="token comment"># Access a field by name.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dog1<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment"># Comet</span><br><br><span class="token comment"># All methods from the tuple class are inherited.</span><br><br><span class="token comment"># Get the name of a namedtuple instance.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">(</span>dog1<span class="token punctuation">)</span><span class="token punctuation">.</span>__name__<span class="token punctuation">)</span> <span class="token comment"># Dog</span><br><br><span class="token comment"># Make a new instance from an iterable.</span><br>data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Native American Indian Dog'</span><span class="token punctuation">,</span> <span class="token string">'Ramsay'</span><span class="token punctuation">]</span><br>dog3 <span class="token operator">=</span> DogNT<span class="token punctuation">.</span>_make<span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment"># Why start with underscore?</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dog3<span class="token punctuation">)</span><br><br><span class="token comment"># Get a dict from a namedtuple.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dog1<span class="token punctuation">.</span>_asdict<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br><span class="token comment"># Create a new instance from an existing one</span><br><span class="token comment"># where some values are replaced.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dog2<span class="token punctuation">.</span>_replace<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">'Oscar Wilde'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><br><span class="token comment"># Get tuple of field names from an instance.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dog1<span class="token punctuation">.</span>_fields<span class="token punctuation">)</span> <span class="token comment"># ('breed', 'name')</span></code></pre><h3 id="deque"><code>deque</code></h3><p>A <a href="https://docs.python.org/3/library/collections.html#collections.deque" rel="noopener" target="_blank"><code>deque</code></a> (pronounced &quot;deck&quot;) is a double-ended queue. Unlike the <code>list</code> class, elements can be efficiently appended to and popped from both ends.</p><p>Here is an example of creating and using <code>deque</code> instances:</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> collections <span class="token keyword">import</span> deque<br><br><span class="token comment"># Create an empty deque and then append values to both ends.</span><br>dogs <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">)</span><br>dogs<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'Oscar'</span><span class="token punctuation">)</span><br>dogs<span class="token punctuation">.</span>appendleft<span class="token punctuation">(</span><span class="token string">'Ramsay'</span><span class="token punctuation">)</span><br>dogs<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'Comet'</span><span class="token punctuation">)</span><br>dogs<span class="token punctuation">.</span>appendleft<span class="token punctuation">(</span><span class="token string">'Maisey'</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span> <span class="token comment"># deque(['Maisey', 'Ramsay', 'Oscar', 'Comet'])</span><br><br><span class="token comment"># Create a deque with initial values.</span><br>dogs <span class="token operator">=</span> deque<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Maisey'</span><span class="token punctuation">,</span> <span class="token string">'Ramsay'</span><span class="token punctuation">,</span> <span class="token string">'Oscar'</span><span class="token punctuation">,</span> <span class="token string">'Comet'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span> <span class="token comment"># deque(['Maisey', 'Ramsay', 'Oscar', 'Comet'])</span><br><br><span class="token comment"># Remove the first and last elements.</span><br>dogs<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token punctuation">)</span><br>dogs<span class="token punctuation">.</span>popleft<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span> <span class="token comment"># deque(['Ramsay', 'Oscar'])</span><br><br><span class="token comment"># Add multiple elements at the beginning (left) and end (right).</span><br>dogs<span class="token punctuation">.</span>extendleft<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Snoopy'</span><span class="token punctuation">,</span> <span class="token string">'Spot'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># added in reverse order</span><br>dogs<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'Speed'</span><span class="token punctuation">,</span> <span class="token string">'Trixie'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span> <span class="token comment"># deque(['Spot', 'Snoopy', 'Ramsay', 'Oscar', 'Speed', 'Trixie'])</span><br><br><span class="token comment"># Insert an element before a given index.</span><br>index <span class="token operator">=</span> <span class="token number">3</span><br>dogs<span class="token punctuation">.</span>insert<span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token string">'Reece'</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span> <span class="token comment"># deque(['Spot', 'Snoopy', 'Ramsay', 'Reece', 'Oscar', 'Speed', 'Trixie'])</span><br><br><span class="token comment"># Remove the element that was just inserted.</span><br><span class="token keyword">del</span> dogs<span class="token punctuation">[</span>index<span class="token punctuation">]</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span> <span class="token comment"># deque(['Spot', 'Snoopy', 'Ramsay', 'Oscar', 'Speed', 'Trixie'])</span><br><br><span class="token comment"># Remove all elements.</span><br>dogs<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span> <span class="token comment"># deque([])</span></code></pre><h3 id="chainmap"><code>Chainmap</code></h3><p>A <a href="https://docs.python.org/3/library/collections.html#collections.ChainMap" rel="noopener" target="_blank"><code>ChainMap</code></a> provides a view over multiple dict objects.</p><p>Here is an example of creating and using a <code>ChainMap</code>:</p><pre class="language-python"><code class="language-python"><span class="token keyword">from</span> collections <span class="token keyword">import</span> ChainMap<br><br>dict1 <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token string">'Maisey'</span><span class="token punctuation">:</span> <span class="token string">'Treeing Walker Coonhound'</span><span class="token punctuation">,</span><br>    <span class="token string">'Ramsay'</span><span class="token punctuation">:</span> <span class="token string">'Native American Indian Dog'</span><br><span class="token punctuation">}</span><br>dict2 <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token string">'Oscar'</span><span class="token punctuation">:</span> <span class="token string">'German Shorthaired Pointer'</span><span class="token punctuation">,</span><br>    <span class="token string">'Comet'</span><span class="token punctuation">:</span> <span class="token string">'Whippet'</span><br><span class="token punctuation">}</span><br><br><span class="token comment"># Create a ChainMap that provides a view of the two dicts above.</span><br>cm <span class="token operator">=</span> ChainMap<span class="token punctuation">(</span>dict1<span class="token punctuation">,</span> dict2<span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>cm<span class="token punctuation">)</span> <span class="token comment"># ChainMap({'Maisey': 'Tree...', 'Ramsay': 'Native...'}, {'Oscar': 'German...', 'Comet': 'Whippet'})</span><br><br><span class="token comment"># Get values of some keys from the ChainMap.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>cm<span class="token punctuation">[</span><span class="token string">'Ramsay'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># Native American Indian Dog</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>cm<span class="token punctuation">[</span><span class="token string">'Comet'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># Whippet</span><br><br><span class="token comment"># Modify one of the dicts and verify that the ChainMap sees the change.</span><br>dict2<span class="token punctuation">[</span><span class="token string">'Oscar'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'GSP'</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>cm<span class="token punctuation">[</span><span class="token string">'Oscar'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># GSP</span><br><br><span class="token comment"># Add data to one of the dicts and verify that the ChainMap sees it.</span><br>dict1<span class="token punctuation">[</span><span class="token string">'Snoopy'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Beagle'</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>cm<span class="token punctuation">[</span><span class="token string">'Snoopy'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># Beagle</span><br><br><span class="token comment"># Get the dicts used by the ChainMap.</span><br>dicts <span class="token operator">=</span> cm<span class="token punctuation">.</span>maps <span class="token comment"># returns list containing dict1 and dict2</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>dicts<span class="token punctuation">)</span><br><br><span class="token comment"># Add a key/value pair to the ChainMap</span><br><span class="token comment"># which adds it to the first associated dict.</span><br><span class="token comment"># It's better to add to associated dicts.</span><br>cm<span class="token punctuation">[</span><span class="token string">'Reece'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Whippet'</span><br><br><span class="token comment"># Remove a key/value pair from the ChainMap</span><br><span class="token comment"># which only removes from the first associated dict</span><br><span class="token comment"># and raises KeyError if not found there.</span><br><span class="token comment"># It's better to remove from to associated dicts.</span><br><span class="token keyword">del</span> cm<span class="token punctuation">[</span><span class="token string">'Reece'</span><span class="token punctuation">]</span></code></pre><h3 id="counter"><code>Counter</code></h3><p>A <a href="https://docs.python.org/3/library/collections.html#collections.Counter" rel="noopener" target="_blank"><code>Counter</code></a> is a special <code>dict</code> that counts occurrences of unique values in an iterable.</p><p>Here is an example of creating and using a <code>Counter</code>:</p><pre class="language-py"><code class="language-py"><span class="token keyword">from</span> collections <span class="token keyword">import</span> Counter<br><br>fruits <span class="token operator">=</span> <span class="token punctuation">[</span><br>    <span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'banana'</span><span class="token punctuation">,</span> <span class="token string">'cherry'</span><span class="token punctuation">,</span> <span class="token string">'grape'</span><span class="token punctuation">,</span> <span class="token string">'orange'</span><span class="token punctuation">,</span> <span class="token string">'strawberry'</span><span class="token punctuation">,</span><br>    <span class="token string">'banana'</span><span class="token punctuation">,</span> <span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'apple'</span><span class="token punctuation">,</span> <span class="token string">'grape'</span><span class="token punctuation">,</span> <span class="token string">'banana'</span><span class="token punctuation">,</span> <span class="token string">'banana'</span><br><span class="token punctuation">]</span><br><br>counter <span class="token operator">=</span> Counter<span class="token punctuation">(</span>fruits<span class="token punctuation">)</span><br><br><span class="token keyword">print</span><span class="token punctuation">(</span>counter<span class="token punctuation">)</span><br><br><span class="token comment"># Get the number of occurrences of banana.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>counter<span class="token punctuation">[</span><span class="token string">'banana'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 4</span><br><br><span class="token comment"># Remove all occurrences of grape.</span><br><span class="token keyword">del</span> counter<span class="token punctuation">[</span><span class="token string">'grape'</span><span class="token punctuation">]</span><br><br><span class="token comment"># Get a list of all the elements in sorted order.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>elements<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token comment"># ['apple', 'apple', 'apple', 'banana', 'banana', 'banana', 'banana',</span><br><span class="token comment">#  'cherry', 'orange', 'strawberry']</span><br><br><span class="token comment"># Get a list of tuples where each contains a unique value</span><br><span class="token comment"># and its count (number of occurrences)</span><br><span class="token comment"># where the tuples are sorted by descending count.</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>most_common<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token comment"># [('banana', 4), ('apple', 3), ('cherry', 1), ('orange', 1), ('strawberry', 1)]</span><br><br><span class="token comment"># Remove some occurrences.</span><br>counter<span class="token punctuation">.</span>subtract<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'banana'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'strawberry'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><br><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>elements<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token comment"># ['apple', 'apple', 'apple', 'banana', 'banana', 'cherry', 'orange']</span><br><span class="token keyword">print</span><span class="token punctuation">(</span>counter<span class="token punctuation">.</span>most_common<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token comment"># [('apple', 3), ('banana', 2), ('cherry', 1), ('orange', 1), ('strawberry', 0)]</span></code></pre><h3 id="ordereddict"><code>OrderedDict</code></h3><h3 id="defaultdict"><code>defaultdict</code></h3><h3 id="userdict"><code>UserDict</code></h3><h3 id="userlist"><code>UserList</code></h3><h3 id="userstring"><code>UserString</code></h3></article>