<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script><h2>Deno</h2><aside><nav class="toc"><ol><li><a href="#differences-from-node.js">Differences from Node.js</a></li><li><a href="#pros">Pros</a></li><li><a href="#cons">Cons</a></li><li><a href="#installing">Installing</a></li><li><a href="#options">Options</a></li><li><a href="#conventions">Conventions</a></li><li><a href="#permission-options">Permission Options</a></li><li><a href="#running">Running</a></li><li><a href="#watching">Watching</a></li><li><a href="#vs-code">VS Code</a></li><li><a href="#linting">Linting</a></li><li><a href="#code-formatting">Code Formatting</a></li><li><a href="#built-in-functions">Built-in Functions</a></li><li><a href="#standard-library">Standard Library</a></li><li><a href="#imports">Imports</a></li><li><a href="#deno.land">deno.land</a></li><li><a href="#deno-global-variable">Deno Global Variable</a></li><li><a href="#parsing-command-line-arguments">Parsing command line arguments</a></li><li><a href="#basic-http-server">Basic HTTP server</a></li><li><a href="#implementing-a-rest-server">Implementing a REST Server</a></li></ol></nav></aside><article><p><img alt="Deno logo" style="width: 30%" src="/blog/assets/Deno.svg" title="Deno logo"></p><p><a href="https://deno.land/" rel="noopener" target="_blank">Deno</a> is a &quot;secure runtime for JavaScript and TypeScript&quot;.</p><p>Ryan Dahl created both <a href="https://nodejs.org/" rel="noopener" target="_blank">Node.js</a> and Deno. In June 2018, he gave a talk at JSConf EU 2018 titled &quot;<a href="https://www.youtube.com/watch?v=M3BM9TB-8yA&vl=en" rel="noopener" target="_blank">10 Things I Regret About Node.js</a>. A prototype of Deno was presented during this talk.</p><p>Deno has builtin support for TypeScript. It automatically compiles TypeScript code to JavaScript before running it, making it unnecessary to define a build process to do this.</p><p>Both Node.js and Deno are built on the Chrome V8 JavaScript engine which is implemented in C++. Node.js is primarily implemented in C++. Deno was originally implemented in Go and later changed to Rust.</p><p>Version 1.0 of Deno was released on May 13, 2020. It is open source and uses the MIT license.</p><p>Deno is secure by default. The environment, file system, and network can only be accessed if explicitly enabled.</p><p>To get started and find documentation, see the <a href="https://deno.land/manual" rel="noopener" target="_blank">Deno Manual</a>.</p><h2 id="differences-from-node.js">Differences from Node.js</h2><ol><li>Deno uses ES Modules by default. Node.js can use ES Modules, but defaults to CommonJS.</li><li>Deno uses URLs for loading remote dependencies rather than relative paths in the <code>node_modules</code> directory.</li><li>Deno uses built-in resource fetching rather than relying on npm to install packages.</li><li>Deno has built-in TypeScript support with caching of compile source files.</li><li>Deno has built-in support for web standards like the Fetch API and functions from the <code>window</code> object.</li><li>Deno requires file system and network access to be explicitly enabled.</li><li>Deno APIs utilize Promises, ES6, and TypeScript features.</li><li>Deno provides a large standard library with no external dependencies.</li><li>Deno uses message passing channels to invoke privileged system APIs.</li></ol><h2 id="pros">Pros</h2><h2 id="cons">Cons</h2><h2 id="installing">Installing</h2><p>To install Deno:</p><ul><li>for Windows, use Chocolately: <code>choco install deno</code></li><li>for macOS, use Homebrew: <code>brew install deno</code></li><li>for Linux, use curl: <code>curl -fsSL https://deno.land/x/install/install.sh | sh</code></li></ul><h2 id="options">Options</h2><p>To get help on <code>deno</code> options, enter <code>deno --help</code>.</p><p>To get help on a subcommand such as &quot;run&quot;, enter <code>deno run --help</code>.</p><p>To get the version of <code>deno</code> that is installed, enter <code>deno -V</code>. To also get the versions of V8 and TypeScript that <code>deno</code> uses, enter <code>deno --version</code>.</p><h2 id="conventions">Conventions</h2><p>The <code>.js</code> and <code>.ts</code> files in the standard library use underscores rather than dashes to separate multiple words in file names.</p><h2 id="permission-options">Permission Options</h2><p>Deno supports the following permission options:</p><ul><li><code>-A</code> or <code>--allow-all</code><br>This allow all permissions, disabling all security.</li><li><code>--allow-env</code><br>This allows getting and setting environment variables.</li><li><code>--allow-hrtime</code><br>This allows use of high-resolution time measurement which can be used in timing attacks and fingerprinting.</li><li><code>--allow-net=&lt;allow-net&gt;</code><br>This allows network access. A comma-separated list of domains can optionally be specified to restrict network access to only those domains.</li><li><code>--allow-plugin</code><br>This allows plugins to be loaded. It is currently an unstable feature.</li><li><code>--allow-read=&lt;allow-read&gt;</code><br>This allows read access to the file system. A comma-separated list of directories or files can optionally be specified to restrict reads to only those directories and files.</li><li><code>--allow-run</code><br>This allow running subprocesses outside of the Deno sandbox, which means they do not have security restrictions.</li><li><code>--allow-write=&lt;allow-write&gt;</code><br>This allows write access to the file system. A comma-separated list of directories or files can optionally be specified to restrict writes to only those directories and files.</li></ul><h2 id="running">Running</h2><p>To run a Deno program, enter a command like the following:</p><pre class="language-bash"><code class="language-bash">deno run src/main.ts</code></pre><p>Deno also supports running a script at a URL. For example, the following outputs a welcome message including a dinosaur unicode character:</p><pre class="language-bash"><code class="language-bash">deno run https://deno.land/std/examples/welcome.ts</code></pre><p>The following command runs a simple HTTP file server that serves all files in and below the current directory on port 1234.</p><pre class="language-bash"><code class="language-bash">deno run --allow-net --allow-read <span class="token punctuation">\</span><br>  https://deno.land/std/http/file_server.ts --port <span class="token number">1234</span></code></pre><p>Browsing localhost:1234 serves the file <code>index.html</code> in the current directory.</p><p>To get help on command line options for <code>file_server.ts</code>, enter the following:</p><pre class="language-bash"><code class="language-bash">deno run --allow-net --allow-read https://deno.land/std/http/file_server.ts --help</code></pre><h2 id="watching">Watching</h2><p>To run in watch mode so the script is restarted when any source file in and below the current directory changes, add the currently unstable <code>--watch</code> option. For example:</p><pre class="language-bash"><code class="language-bash">deno run --allow-net --unstable --watch my_server.ts</code></pre><p>When a file change is detected, the program is restarted, but no output is generated to indicate that this happened.</p><p>Another more full-featured option for watching files that is similar to <a href="https://nodemon.io/" rel="noopener" target="_blank">nodemon</a> is <a href="https://github.com/denosaurs/denon" rel="noopener" target="_blank">denon</a>.</p><p>To install denon:</p><ul><li>enter <code>deno install -Af --unstable https://deno.land/x/denon/denon.ts</code></li><li>add <code>$HOME/.deno/bin</code> to your <code>PATH</code> environment variable</li></ul><p>Use the <code>denon</code> command in place of the <code>deno</code> command with the same options and arguments. For example:</p><pre class="language-bash"><code class="language-bash">denon run --allow-net my_server.ts</code></pre><h2 id="vs-code">VS Code</h2><p>The &quot;Deno&quot; VS Code extension provides:</p><ul><li>intellisense</li><li>import URL completion</li><li>diagnostics with quick fixes</li><li>optional use of <code>deno fmt</code> for code formatting</li><li>TypeScript type definitions</li></ul><p>After installing, add the following to the user settings JSON:</p><pre class="language-json"><code class="language-json"><span class="token property">"deno.enable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br><span class="token property">"deno.import_intellisense_origins"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>  <span class="token property">"https://deno.land"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>  <span class="token property">"https://deno.land/x"</span><span class="token operator">:</span> <span class="token boolean">true</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span><br><span class="token property">"deno.lint"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br><span class="token property">"deno.unstable"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span></code></pre><p>Enabling <code>deno.unstable</code> is required to use <code>deno lint</code>.</p><p>To use <code>deno fmt</code> for formatting TypeScript files, regardless of whether they will be run by Deno, add the following:</p><pre class="language-json"><code class="language-json"><span class="token property">"[typescript]"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>  <span class="token property">"editor.defaultFormatter"</span><span class="token operator">:</span> <span class="token string">"denoland.vscode-deno"</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre><h2 id="linting">Linting</h2><p>To lint all <code>.js</code> and <code>.ts</code> files in and below the current directory, enter <code>deno lint --unstable</code>.</p><p>To see a list of the rules checked by <code>deno lint</code>, enter <code>deno lint --rules --unstable</code>.</p><p>To prevent the linter from running on a file, add the following comment at the top:</p><pre class="language-js"><code class="language-js"><span class="token comment">// deno-lint-ignore-file</span></code></pre><p>To prevent the linter from checking specific rules on a file, add the following comment at the top:</p><pre class="language-js"><code class="language-js"><span class="token comment">// deno-lint-ignore-file rule1 rule2 rule3</span></code></pre><p>To prevent the linter from checking specific rules on a specific line, add the following comment before the line:</p><pre class="language-js"><code class="language-js"><span class="token comment">// deno-lint-ignore rule1 rule2 rule3</span></code></pre><h2 id="code-formatting">Code Formatting</h2><p>To format all <code>.js</code>, <code>.json</code>, and <code>.ts</code> files in and below the current directory, enter <code>deno fmt</code>. This uses <code>dprint</code> (implemented in Rust) rather than Prettier. Two noticeable changes it makes are to adds semicolons where missing and change single quotes to double.</p><p>To prevent formatting a statement, precede it with the comment <code>// deno-fmt-ignore</code>. To prevent formatting an entire file, add the comment <code>// deno-fmt-ignore-file</code> at the top.</p><p>There is discussion about making the formatting configurable, but it seems to not currently be configurable.</p><p>If the formatting performed by <code>deno fmt</code> is not to your liking, Prettier can be used instead.</p><h2 id="built-in-functions">Built-in Functions</h2><p>For documentation on the built-in functions, see the <a href="https://doc.deno.land/builtin/stable" rel="noopener" target="_blank">Runtime API</a>.</p><h2 id="standard-library">Standard Library</h2><p>The Deno <a href="https://deno.land/std" rel="noopener" target="_blank">Standard Library</a> is modeled after that of the Go programming language. It is maintained by the Deno team. These libraries typically contain a <code>mod.ts</code> file that defines what is exported.</p><p>For example, the <code>fs</code> library provides the following functions:</p><ul><li><code>copy</code> copies a file or directory</li><li><code>exists</code> tests whether a file or directory exists</li><li><code>move</code> moves a file or directory</li><li><code>walk</code> recursively walks the files in a directory</li><li>and more</li></ul><p>The <code>fmt</code> library provides the following functions:</p><ul><li><code>printf</code> prints formatted output</li><li>functions to output text with a specific style including <code>bold</code>, <code>dim</code>, <code>hidden</code>, <code>inverse</code>, <code>italic</code>, <code>strikethrough</code>, and <code>underline</code></li><li>functions to output text in a color including <code>black</code>, <code>blue</code>, <code>cyan</code>, <code>gray</code>, <code>green</code>, <code>magenta</code>, <code>red</code>, <code>white</code>, <code>yellow</code>, and <code>rgb8</code> (for custom colors)</li><li><code>bg</code> versions of the color functions to set the background color</li><li><code>bright</code> versions of the color functions</li><li><code>bgBright</code> versions of the color functions to set a bright background color</li></ul><p>To write to stdout with colors, similar to the npm package &quot;chalk&quot;:</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span><br>  bgYellow<span class="token punctuation">,</span><br>  blue<span class="token punctuation">,</span><br>  green<span class="token punctuation">,</span><br>  italic<span class="token punctuation">,</span><br>  red<span class="token punctuation">,</span><br>  underline<br><span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://deno.land/std/fmt/colors.ts'</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><br>  <span class="token function">bgYellow</span><span class="token punctuation">(</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token string">'one'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>  <span class="token function">italic</span><span class="token punctuation">(</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token string">'two'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>  <span class="token function">underline</span><span class="token punctuation">(</span><span class="token function">blue</span><span class="token punctuation">(</span><span class="token string">'three'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>A version can optionally be specified in URLs. For example:</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>blue<span class="token punctuation">,</span> green<span class="token punctuation">,</span> red<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://deno.land/std@0.79.0/fmt/colors.ts'</span><span class="token punctuation">;</span></code></pre><p>The <code>io</code> library provides functions for input/output. For example, to read from a file one line at a time:</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>readLines<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://deno.land/std/io/mod.ts'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> path <span class="token keyword">from</span> <span class="token string">'https://deno.land/std/path/mod.ts'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> filename <span class="token operator">=</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>Deno<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'my-file.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">await</span> Deno<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> line <span class="token keyword">of</span> <span class="token function">readLines</span><span class="token punctuation">(</span>reader<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h2 id="imports">Imports</h2><p>Deno does not use npm to install modules. Instead, <code>import</code> statements can specify module URLs that reference network resources such as those in GitHub.</p><p>Imported files are cached by saving them in the directory specified in the <code>DENO_DIR</code> environment variable rather than in a <code>node_modules</code> directory. If this environment variable is not set, the files are saved in an OS-specific location.</p><ul><li>Windows: <code>%LOCALAPPDATA%/deno</code></li><li>macOS: <code>\$HOME/Library/Caches/deno</code></li><li>Linux: <code>\$XDG_CACHE_HOME/deno</code> or <code>\$HOME/.cache/deno</code></li></ul><p>Downloaded dependencies are placed in the <code>deps</code> subdirectory. JavaScript files created by compiling TypeScript files are placed in the <code>gen</code> subdirectory. The <code>gen</code> directory contains a <code>file</code> directory for <code>.js</code> files generated from <code>.ts</code> files in the file system and a <code>https</code> directory for <code>.js</code> files generated from downloaded <code>.ts</code> files.</p><p>Dependencies are not cataloged in a <code>package.json</code> file, which is not used at all. TODO: How do you script common actions?</p><p>Spreading library URLs throughout the source files of a project can be undesirable, especially of some are repeated in multiple files. An alternate approach is to create a file like <code>src/deps.ts</code> (recommended name) containing lines like the following:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token punctuation">{</span>name1<span class="token punctuation">,</span> name2<span class="token punctuation">,</span> name3<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://domain1/pkg1@v1/filename1.ts'</span><span class="token punctuation">;</span><br><span class="token keyword">export</span> <span class="token punctuation">{</span>name4<span class="token punctuation">,</span> name5<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://domain2/pkg2@v2/filename2.ts'</span><span class="token punctuation">;</span></code></pre><p>Then import from this file with lines like the following:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span>name1<span class="token punctuation">,</span> name3<span class="token punctuation">,</span> name4<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./deps.ts'</span><span class="token punctuation">;</span></code></pre><p>TODO: Isn't it odd to then have every source file only import from this one file?</p><p>It is useful to record the version of each dependency being used so the same versions can be downloaded by multiple developers and in CI/CD environments. A lock file does just this. Assuming all dependencies are exported from the file <code>src/deps.ts</code>, enter the following command to create a lock file named <code>lock.json</code>.</p><pre class="language-bash"><code class="language-bash">deno cache --lock<span class="token operator">=</span>lock.json --lock-write src/deps.ts</code></pre><p>Add the lock file to version control.</p><p>To install all the dependency versions specified in a lock file, enter the following command:</p><pre class="language-bash"><code class="language-bash">deno cache --reload --lock<span class="token operator">=</span>lock.json src/deps.ts</code></pre><p>The cached files continue to be used without checking whether dependencies have been updated. To update the cached files to their latest versions, enter <code>deno cache --reload</code>.</p><p>To update a single module to a specific version, enter a command like the following:</p><pre class="language-bash"><code class="language-bash">deno cache --reload<span class="token operator">=</span>https://some-domain/some-module@version main.ts</code></pre><p>After doing this, the lock file can be updated by entering the command for creating it that was described earlier.</p><p>To run a Deno program using only cached modules, preventing any new downloads, enter a command like the following:</p><pre class="language-bash"><code class="language-bash">deno run --lock<span class="token operator">=</span>lock.json --cached-only main.ts</code></pre><p>This will fail if any source file imports a module with a URL that has not previously been cached.</p><h2 id="deno.land">deno.land</h2><p>The site <code>https://deno.land/x</code> hosts a curated collection of third-party modules that work with Deno. As of 11/23/2020 it contained 1,302 modules. Examples include lodash, date_fns, ramda, xstate, ky (HTTP client), and i18next (internationalization framework).</p><h2 id="deno-global-variable">Deno Global Variable</h2><p>When a script is run with <code>deno run</code>, the <code>Deno</code> global variable is made available. It has a large number of properties, most of which are functions. Examples include:</p><p>args - array of command-line arguments Buffer chdir chmod chmodSync chown chownSync close connect copy copyFile copyFileSync create createSync cwd execPath exit File inspect iter iterSync listen mainModule mkdir mkdirSync open openSync pid - process id ppid - parent process id read readAll readAllSync readDir readDirSync readFile readFileSync readLink readLinkSync readSync readTextFile readTextFileSync realPath realPathSync remove removeSync rename renameSync run stderr stdin stdout test watchFs write writeAll writeAllSync writeFile writeFileSync writeSync writeTextFile writeTextFileSync</p><p>build - an object with <code>arch</code>, <code>env</code>, <code>os</code>, <code>target</code>, and <code>vendor</code> properties</p><p>env - an object with the functions <code>delete</code>, <code>get</code>, <code>set</code>, and <code>toObject</code></p><p>errors - an object whose properties are the following error constructor functions:</p><ul><li>AddrInUse</li><li>AddrNotAvailable</li><li>AlreadyExists</li><li>BadResource</li><li>BrokenPipe</li><li>Busy</li><li>ConnectionAborted</li><li>ConnectionRefused</li><li>ConnectionReset</li><li>Http</li><li>Interrupted</li><li>InvalidData</li><li>NotConnected</li><li>NotFound</li><li>NotSupported</li><li>PermissionDenied</li><li>TimedOut</li><li>UnexpectedEof</li><li>WriteZero</li></ul><p>version - an object with the properties <code>deno</code>, <code>typescript</code>, and <code>v8</code> whose values are all version numbers</p><p>To write and read text files:</p><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> text <span class="token operator">=</span> <span class="token string">'This is a story\nbout a man named Jed'</span><span class="token punctuation">;</span><br><span class="token keyword">await</span> Deno<span class="token punctuation">.</span><span class="token function">writeTextFile</span><span class="token punctuation">(</span><span class="token string">'demo.txt'</span><span class="token punctuation">,</span> text<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> Deno<span class="token punctuation">.</span><span class="token function">readTextFile</span><span class="token punctuation">(</span><span class="token string">'demo.txt'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><h2 id="parsing-command-line-arguments">Parsing command line arguments</h2><p>See the <a href="https://deno.land/x/yargs@v16.1.1-deno" rel="noopener" target="_blank">Yargs</a> library.</p><h2 id="basic-http-server">Basic HTTP server</h2><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>serve<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://deno.land/std/http/server.ts'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token number">6543</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token function">serve</span><span class="token punctuation">(</span><span class="token punctuation">{</span>port<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'listening on port'</span><span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> req <span class="token keyword">of</span> server<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token comment">//console.log('req is', req)</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'got request for'</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>method<span class="token punctuation">,</span> req<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  req<span class="token punctuation">.</span><span class="token function">respond</span><span class="token punctuation">(</span><span class="token punctuation">{</span>body<span class="token operator">:</span> <span class="token string">'Hello World\n'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre><h2 id="implementing-a-rest-server">Implementing a REST Server</h2><p>There are many HTTP server libraries for Deno. Currently the most popular is <a href="https://oakserver.github.io/oak/" rel="noopener" target="_blank">oak</a>. It is inspired by the Koa package for Node.js.</p><p>Here is an example of implementing a REST server in oak that supports CRUD operations on dog objects.</p><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>Application<span class="token punctuation">,</span> Router<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://deno.land/x/oak/mod.ts'</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span>v4<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'https://deno.land/std/uuid/mod.ts'</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token constant">PORT</span> <span class="token operator">=</span> <span class="token number">1234</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> dogs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">createDog</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token keyword">await</span> context<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>breed<span class="token punctuation">,</span> name<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> body<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> id <span class="token operator">=</span> v4<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  dogs<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>id<span class="token punctuation">,</span> breed<span class="token punctuation">,</span> name<span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>  context<span class="token punctuation">.</span>response<span class="token punctuation">.</span>body <span class="token operator">=</span> id<span class="token punctuation">;</span><br>  context<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">201</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">deleteAllDogs</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  dogs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">deleteDog</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> context<span class="token punctuation">.</span>params<span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>dogs<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">delete</span> dogs<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span><br>    context<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">200</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    context<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">404</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getAllDogs</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  context<span class="token punctuation">.</span>response<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getDog</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> context<span class="token punctuation">.</span>params<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> dog <span class="token operator">=</span> dogs<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>dog<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    context<span class="token punctuation">.</span>response<span class="token punctuation">.</span>body <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    context<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">404</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">updateDog</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span> <span class="token operator">=</span> context<span class="token punctuation">.</span>params<span class="token punctuation">;</span><br>  <span class="token keyword">const</span> dog <span class="token operator">=</span> dogs<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">;</span><br>  <span class="token keyword">if</span> <span class="token punctuation">(</span>dog<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token keyword">await</span> context<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">body</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    dogs<span class="token punctuation">[</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">await</span> body<span class="token punctuation">.</span>value<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server.js updateDog: not found'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    context<span class="token punctuation">.</span>response<span class="token punctuation">.</span>status <span class="token operator">=</span> <span class="token number">404</span><span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>router<br>  <span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'/dog'</span><span class="token punctuation">,</span> deleteAllDogs<span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">'/dog/:id'</span><span class="token punctuation">,</span> deleteDog<span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/dog'</span><span class="token punctuation">,</span> getAllDogs<span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/dog/:id'</span><span class="token punctuation">,</span> getDog<span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/dog'</span><span class="token punctuation">,</span> createDog<span class="token punctuation">)</span><br>  <span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">'/dog/:id'</span><span class="token punctuation">,</span> updateDog<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token comment">// patch is also supported.</span><br><br><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token comment">// Request logging</span><br>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>ctx<span class="token punctuation">.</span>request<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">routes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>app<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'listen'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'listening on port'</span><span class="token punctuation">,</span> <span class="token constant">PORT</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">await</span> app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">{</span>port<span class="token operator">:</span> <span class="token constant">PORT</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>Here is client code that sends requests to this REST server.</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token constant">URL_PREFIX</span> <span class="token operator">=</span> <span class="token string">'http://localhost:1234/dog'</span><span class="token punctuation">;</span><br><br><span class="token keyword">function</span> <span class="token function">addDog</span><span class="token punctuation">(</span><span class="token parameter">dog</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">URL_PREFIX</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>method<span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span> headers<span class="token punctuation">,</span> body<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">deleteAllDogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">URL_PREFIX</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>method<span class="token operator">:</span> <span class="token string">'DELETE'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">deleteDog</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">URL_PREFIX</span> <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> id<span class="token punctuation">,</span> <span class="token punctuation">{</span>method<span class="token operator">:</span> <span class="token string">'DELETE'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getAllDogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">URL_PREFIX</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getDogById</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">URL_PREFIX</span> <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">getDogByName</span><span class="token punctuation">(</span><span class="token parameter">dogs<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">dog</span> <span class="token operator">=></span> dog<span class="token punctuation">.</span>name <span class="token operator">===</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">updateDog</span><span class="token punctuation">(</span><span class="token parameter">dog</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'Content-Type'</span><span class="token operator">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> body <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>dog<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">return</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">URL_PREFIX</span> <span class="token operator">+</span> <span class="token string">'/'</span> <span class="token operator">+</span> dog<span class="token punctuation">.</span>id<span class="token punctuation">,</span> <span class="token punctuation">{</span>method<span class="token operator">:</span> <span class="token string">'PUT'</span><span class="token punctuation">,</span> headers<span class="token punctuation">,</span> body<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">await</span> <span class="token function">deleteAllDogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">await</span> <span class="token function">addDog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Maisey'</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">'Treeing Walker Coonhound'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">await</span> <span class="token function">addDog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Ramsay'</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">'Native American Indian Dog'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">await</span> <span class="token function">addDog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Oscar'</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">'German Shorthaired Pointer'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">await</span> <span class="token function">addDog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Comet'</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">'Whippet'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">await</span> <span class="token function">addDog</span><span class="token punctuation">(</span><span class="token punctuation">{</span>name<span class="token operator">:</span> <span class="token string">'Snoopy'</span><span class="token punctuation">,</span> breed<span class="token operator">:</span> <span class="token string">'Beagle'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token constant">URL_PREFIX</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">let</span> dogs <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getAllDogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'dogs ='</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> oscar <span class="token operator">=</span> <span class="token function">getDogByName</span><span class="token punctuation">(</span>dogs<span class="token punctuation">,</span> <span class="token string">'Oscar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'client.js x: oscar ='</span><span class="token punctuation">,</span> oscar<span class="token punctuation">)</span><span class="token punctuation">;</span><br>oscar<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Oscar Wilde'</span><span class="token punctuation">;</span><br><span class="token keyword">await</span> <span class="token function">updateDog</span><span class="token punctuation">(</span>oscar<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> res2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">deleteDog</span><span class="token punctuation">(</span><span class="token function">getDogByName</span><span class="token punctuation">(</span>dogs<span class="token punctuation">,</span> <span class="token string">'Snoopy'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'client.js x: res2 ='</span><span class="token punctuation">,</span> res2<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>dogs <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getAllDogs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'after delete, dogs ='</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span>dogs<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'client.js x: oscar ='</span><span class="token punctuation">,</span> <span class="token keyword">await</span> <span class="token function">getDogById</span><span class="token punctuation">(</span>oscar<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></article>