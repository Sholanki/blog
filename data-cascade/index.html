<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="description" content="11ty site documenting 11ty" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Data Cascade</title>
    <link rel="icon" type="image/png" sizes="96x96" href="/blog/assets/favicon.png">
    <link rel="manifest" href="/blog/assets/manifest.json">
    <link rel="stylesheet" href="/blog/assets/styles.css" />

    <script>
      if ("serviceWorker" in navigator) {
        window.addEventListener('load', () => {
          console.log('registering service worker');
          navigator.serviceWorker.register('/blog/service-worker.js');
        })
      }
    </script> 
  </head>
  <body>
    <h1>Mark Volkmann's Blog</h1>
    <main>
      <nav> <!-- for accessible page navigation -->
        <h3>Intro. Topics</h3>
        <ul><li><a href="/blog/ssgs/">Static site generators</a></li><li><a href="/blog/why-11ty/">Why 11ty?</a></li><li><a href="/blog/11ty-overview/">11ty Overview</a></li><li><a href="/blog/getting-started/">Getting Started</a></li><li><a href="/blog/github-pages/">GitHub Pages</a></li></ul>

        <hr>

        <h3>More Topics</h3>
        <ul><li><a href="/blog/collection-sorting/">Collection Sorting</a></li><li><a href="/blog/collections/">Collections</a></li><li><a href="/blog/data-cascade/">Data Cascade</a></li><li><a href="/blog/debugging-tips/">Debugging Tips</a></li><li><a href="/blog/front-matter/">Front Matter</a></li><li><a href="/blog/global-data/">Global Data</a></li><li><a href="/blog/internationalization/">Internationalization</a></li><li><a href="/blog/markdown/">Markdown</a></li><li><a href="/blog/nunjucks/">Nunjucks</a></li><li><a href="/blog/pagination/">Pagination</a></li><li><a href="/blog/permalinks/">Permalinks</a></li><li><a href="/blog/rest-services/">REST Services</a></li><li><a href="/blog/shortcodes/">Shortcodes</a></li><li><a href="/blog/styling/">Styling</a></li><li><a href="/blog/styling-with-sass/">Styling with Sass</a></li><li><a href="/blog/syntax-highlighting/">Syntax Highlighting</a></li><li><a href="/blog/templating-languages/">Templating Languages</a></li><li><a href="/blog/yaml/">YAML</a></li></ul>
      </nav>
      
      <section>
        <h2>Data Cascade</h2> <!-- uses a variable defined in front matter -->
        <!-- Page content is inserted here. -->
        <p>Data in an 11ty project is held in variables.
Pages can access these variables.
Variables can be defined in multiple places, and
the &quot;cascade&quot; defines which definition takes precedence.</p>
<p>The places where variables can be defined,
from highest to lowest precedence, include:</p>
<ul>
<li><code>{template-name}.{markup-extension}</code> in front matter</li>
<li>front matter in layouts used by the template</li>
<li><code>{template-name}.11tydata.js</code> file in same directory</li>
<li><code>{template-name}.11tydata.json</code> file in same directory</li>
<li><code>{dir-name}.11tydata.js</code> file in same directory</li>
<li><code>{dir-name}.11tydata.json</code> file in same directory</li>
<li><code>{dir-name}.11tydata.js</code> files in ancestor directories</li>
<li><code>{dir-name}.11tydata.json</code> files in ancestor directories</li>
<li><code>{data-name}.js</code> file in the <code>_data</code> directory</li>
<li><code>{data-name}.json</code> file in the <code>_data</code> directory</li>
</ul>
<p>JavaScript files can generate data and
retrieve it from REST services.
The use of the directory <code>_data</code> was inspired by Jekyll.</p>
<p>Data from a file whose name starts with <code>{template-name}.11tydata.</code>
is only available in template files in the same directory
whose name starts with <code>{template-name}.</code>.</p>
<p>Data from a file whose name starts with <code>{dir-name}.11tydata.</code>
is available in all template files in the same directory and below.</p>
<p>Directory files that are closer to a template file
take precedence over those higher in the directory hierarchy.
TODO: It seems layout front matter is given the lowest precedences,
TODO: but that does not match the docs.
TODO: See this issue you created: https://github.com/11ty/eleventy/issues/915</p>
<p>Let's walk through a comprehensive example to demonstrate
all the possible sources of data for a template.
Consider the following directory structure.
Each of these files define an array of dogs.
Any one of them can be used as the source of this data.
The files are numbered to indicate their precedence in
providing data used in <code>dogs.md</code> with 1 being the highest.</p>
<ul>
<li>_includes
<ul>
<li>layout.njk (10)</li>
</ul>
</li>
<li>_data
<ul>
<li>dogs.js (8)</li>
<li>dogs.json (9)</li>
</ul>
</li>
<li>level1
<ul>
<li>level1.11tydata.js (6)</li>
<li>level1.11tydata.json (7)</li>
<li>level2
<ul>
<li>dogs.11tydata.js (2)</li>
<li>dogs.11tydata.json (3)</li>
<li>level2.11tydata.js (4)</li>
<li>level2.11tydata.json (5)</li>
<li>dogs.md (1)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Here is example content from <code>_data/dogs.js</code>.
It exports an array of dogs.</p>
<pre><code class="language-js">module.exports = [
  {name: 'Dasher', breed: 'Whippet'},
  {name: 'Maisey', breed: 'Treeing Walker Coonhound'},
  {name: 'Ramsey', breed: 'Native American Indian Dog'},
  {name: 'Oscar', breed: 'German Shorthaired Pointer'}
];
</code></pre>
<p>Here is example content from <code>_data/dogs.json</code>.
It defines a value for the global variable <code>dogs</code>.</p>
<pre><code class="language-json">[
  {&quot;name&quot;: &quot;Dasher&quot;, &quot;breed&quot;: &quot;Whippet&quot;},
  {&quot;name&quot;: &quot;Maisey&quot;, &quot;breed&quot;: &quot;Treeing Walker Coonhound&quot;},
  {&quot;name&quot;: &quot;Ramsey&quot;, &quot;breed&quot;: &quot;Native American Indian Dog&quot;},
  {&quot;name&quot;: &quot;Oscar&quot;, &quot;breed&quot;: &quot;German Shorthaired Pointer&quot;}
]
</code></pre>
<p>Here is example content from <code>level1/level1.11tydata.js</code>,
<code>level1/level2/level2.11tydata.js</code>, and <code>level1/level2/dogs.11tydata.js</code>.
They all export an object with a <code>dogs</code> property
whose value is an array of dogs.</p>
<pre><code class="language-js">module.exports = {
  dogs: [
    {name: 'Dasher JS1', breed: 'Whippet'},
    {name: 'Maisey JS1', breed: 'Treeing Walker Coonhound'},
    {name: 'Ramsey JS1', breed: 'Native American Indian Dog'},
    {name: 'Oscar JS1', breed: 'German Shorthaired Pointer'}
  ]
};
</code></pre>
<p>Here is example content from <code>level1/level1.11tydata.json</code>,
<code>level1/level2/level2.11tydata.json</code>, and <code>level1/level2/dogs.11tydata.json</code>.
They all define an object with a <code>dogs</code> property
whose value is an array of dogs.</p>
<pre><code class="language-json">[
  {&quot;name&quot;: &quot;Dasher&quot;, &quot;breed&quot;: &quot;Whippet&quot;},
  {&quot;name&quot;: &quot;Maisey&quot;, &quot;breed&quot;: &quot;Treeing Walker Coonhound&quot;},
  {&quot;name&quot;: &quot;Ramsey&quot;, &quot;breed&quot;: &quot;Native American Indian Dog&quot;},
  {&quot;name&quot;: &quot;Oscar&quot;, &quot;breed&quot;: &quot;German Shorthaired Pointer&quot;}
]
</code></pre>
<p>Here is the content of <code>level1/level2.dogs.md</code>.
It defines an array of dogs using YAML syntax.</p>
<pre><code class="language-md">---
dogs:
  - name: Dasher
    breed: Whippet
  - name: Maisey
    breed: Treeing Walker Coonhound
  - name: Ramsey
    breed: Native American Indian Dog
  - name: Oscar
    breed: German Shorthaired Pointer
layout: layout.njk
---
</code></pre>
<h1>Dogs</h1>
<pre><code>
The set of variables obtained from these sources is merged,
but their values are not.
For example, if a template defines `tags` to be `['dog', 'pet']`
and its layout defines `tags` to be `['canine', 'creature', 'pet']`
the result will be `['dog', 'pet']`.

As another example, consider a template with the following front matter:

```yaml
layout: myLayout.njk
title: 'Template Title'
</code></pre>
<p>Suppose <code>myLayout.njk</code> contains the following front matter:</p>
<pre><code class="language-yaml">score: 7
title: 'Layout Title'
</code></pre>
<p>The data available in the template will be:</p>
<pre><code class="language-js">{
  layout: myLayout.njk,
  score: 7,
  title: 'Template Title'
}
</code></pre>

      </section>
    </main>
    <footer>
      &copy; R. Mark Volkmann, 2020
    </footer>
  </body>
</html>