<link rel="preload" as="style" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/prism-a11y.css"><link rel="stylesheet" href="/blog/assets/topic.css"><h2>REST Services</h2><p>One way to make data from REST services available to templates is to add <code>.js</code> files under the <code>_data</code> directory whose names are the name of a global variable to set.</p><p>For example, the global variable <code>employees</code> can be set by creating the file <code>_data/employees.js</code> that uses the Fetch API to call a REST service. To use the Fetch API, <code>npm install -d node-fetch</code>.</p><p>This file could contain the following:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> fetch <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node-fetch'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">'https://dummy.restapiexample.com/api/v1/employees'</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// This REST service returns an object with the properties</span><br>  <span class="token comment">// success and data where data is an array of employee objects.</span><br>  <span class="token keyword">return</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre><p>The employees can be rendered on a page like this:</p><pre class="language-liquid"><code class="language-liquid">{<span class="token operator">%</span> <span class="token keyword">for</span> employee <span class="token keyword">in</span> employees <span class="token operator">%</span>}<br>  <span class="token operator">&lt;</span>p<span class="token operator">></span>{{ employee.employee_name}} is {{employee.employee_age}} years old.&lt;<span class="token operator">/</span>p<span class="token operator">></span><br>{<span class="token operator">%</span> <span class="token keyword">endfor</span> <span class="token operator">%</span>}</code></pre><p>We can also make data from a REST service available to only a single template or only templates in and below a given directory. For example, suppose the file <code>company/employees.md</code> needs access to the employee data. We can create the file <code>company/employees.11tydata.js</code> or <code>company/company.11tydata.js</code> containing the following:</p><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> fetch <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'node-fetch'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>module<span class="token punctuation">.</span><span class="token function-variable function">exports</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">'https://dummy.restapiexample.com/api/v1/employees'</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token comment">// Any number of front matter variables</span><br>  <span class="token comment">// can be included in the returned object.</span><br>  <span class="token keyword">return</span> <span class="token punctuation">{</span>employees<span class="token operator">:</span> response<span class="token punctuation">.</span>data<span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre>