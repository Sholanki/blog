{#
This renders a single nav item in an li element.
It calls renderNavItem recursively if the nav item has children
in order to create a tree of links.
#}
{% macro renderNavItem(entry) %}
  {# <p>renderNavItem: entry.url = {{ entry.url }}</p> #}
  {# <p>renderNavItem: activeUrl = {{ activeUrl }}</p> #}
  {% set active = entry.url === page.url %}

  {% set class = "" %}
  {% if active %}
    {% set class = class + " active" %}
  {% endif %}
  {% if entry.order %}
    {% set class = class + " ordered" %}
  {% endif %}
  {% if not entry.parent %}
    {% set class = class + " top" %}
  {% endif %}

  <li class="{{class}}">
    <a
      href="{{ entry.url | url }}"
      onclick="saveUrl({{entry.url}})"
      target="frame"
    >
      {{ entry.title }}
      {% if entry.children.length > 0 %}&#x25b6;{% endif %}
    </a>
    {% if entry.url in page.url and entry.children.length %}
      {{ renderNavList(entry.children) }}
    {% endif %}
  </li>
{% endmacro %}

{#
This renders a list of nav items inside a ul element.
#}
{% macro renderNavList(entries) %}
  <ul>
    {% for entry in entries %}
      {{ renderNavItem(entry) }}
    {% endfor %}
  </ul>
{% endmacro %}
