<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Pagination</title>

    <meta charset="utf-8">
    <meta name="description" content="11ty site documenting 11ty">
    <meta name="theme-color" content="cornflowerblue">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" href="/blog/assets/mark-volkmann-192.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/blog/assets/favicon-blue.png">
    <link rel="manifest" href="/blog/assets/manifest.json">
    
    <link rel="preload" as="style" href="/blog/assets/styles.css">
    <link rel="stylesheet" href="/blog/assets/styles.css">

    <!-- This is for use with eleventy-plugin-syntaxhighlight. -->
    <link rel="preload" as="style" href="/blog/assets/prism-a11y.css">
    <link rel="stylesheet" href="/blog/assets/prism-a11y.css" />

    <script>
      // Only register the service worker when not on localhost.
      if (location.hostname !== 'localhost' && 'serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/blog/service-worker.js');
        })
      }
    </script> 
  </head>
  <body>
    <header>
      <h1>Mark Volkmann's Blog</h1>
      
      
    </header>
    <main>
      <nav>
        

        <h2>Intro. Topics</h2>
        
        
        
  <ul>
    
      
  
  <li class=>
    <a href="/blog/ssgs/">Static Site Generators</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/why-11ty/">Why 11ty?</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/11ty-overview/">11ty Overview</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/getting-started/">Getting Started</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/11ty-configuration/">11ty Configuration</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/github-pages/">GitHub Pages</a>
    
  </li>

    
  </ul>


        <hr>

        <h2>More Topics</h2>
        
        
        
  <ul>
    
      
  
  <li class=>
    <a href="/blog/collections/">Collections</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/data-cascade/">Data Cascade</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/debugging-tips/">Debugging Tips</a>
    
  </li>

    
      
  
  <li class=>
    <a href="https://11ty.dev/">Eleventy web site</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/filters/">Filters</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/front-matter/">Front Matter</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/global-data/">Global Data</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/internationalization/">Internationalization</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/markdown/">Markdown</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/nunjucks/">Nunjucks</a>
    
  </li>

    
      
  
  <li class=active>
    <a href="/blog/pagination/">Pagination</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/permalinks/">Permalinks</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/plugins/">Plugins</a>
    
      
  <ul>
    
      
  
  <li class=>
    <a href="/blog/syntax-highlighting/">Syntax Highlighting</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/navigation-plugin/">Navigation Plugin</a>
    
  </li>

    
  </ul>

    
  </li>

    
      
  
  <li class=>
    <a href="/blog/pwa/">Progressive Web Apps</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/rest-services/">REST Services</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/shortcodes/">Shortcodes</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/styling/">Styling</a>
    
      
  <ul>
    
      
  
  <li class=>
    <a href="/blog/styling-with-sass/">Styling with Sass</a>
    
  </li>

    
  </ul>

    
  </li>

    
      
  
  <li class=>
    <a href="/blog/templating-languages/">Templating Languages</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/">Welcome!</a>
    
  </li>

    
      
  
  <li class=>
    <a href="/blog/yaml/">YAML</a>
    
  </li>

    
  </ul>

      </nav>
      
      <section>
        <h2>Pagination</h2> <!-- uses a variable defined in front matter -->
        <!-- Page content is inserted here. -->
        <p>Pagination is the 11ty term for producing multiple files from one input file.
It operates on an array of data.
The <code>size</code> variable specifies the number of
array elements to be rendered on each page.
Often it is set to 1 to render each element on a separate page.
The array data can come from anywhere in the data cascade.</p>
<p>By default the URL for each page produced ends with a slash and a page number.</p>
<p>For example:</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">pagination</span><span class="token punctuation">:</span><br>  <span class="token key atrule">data</span><span class="token punctuation">:</span> employees <span class="token comment"># data over which to paginate</span><br>  <span class="token key atrule">size</span><span class="token punctuation">:</span> <span class="token number">7</span> <span class="token comment"># number of employees per page</span></code></pre>
<p>The global variable <code>pagination</code> holds related data.</p>
<ul>
<li><code>pagination.data</code> holds the value of the
pagination <code>data</code> property from the front matter.</li>
<li><code>pagination.pages</code> holds an array of items for each page.
When the size is one the array holds each page item.
When the size is greater than one it holds arrays of the items on each page.
When <code>data</code> is an object rather than an array, it holds keys instead of items.</li>
<li><code>pagination.items</code> is an array of the objects
to be rendered on the current page.</li>
<li><code>pagination.pages.length</code> is the number of pages.</li>
<li><code>pagination.pageNumber</code> holds the zero-based index of the current page.</li>
<li><code>pagination.firstPageLink</code> holds the URL of the first page (alias <code>first</code>).</li>
<li><code>pagination.firstPageHref</code> is the same, but omits <code>index.html</code> at end.</li>
<li><code>pagination.previousPageLink</code> holds the URL of the previous page (alias <code>previous</code>).</li>
<li><code>pagination.previousPageHref</code> is the same, but omits <code>index.html</code> at end.</li>
<li><code>pagination.nextPageLink</code> holds the URL of the next page; (alias <code>next</code>).</li>
<li><code>pagination.nextPageHref</code> is the same, but omits <code>index.html</code> at end.</li>
<li><code>pagination.lastPageLink</code> holds the URL of the last page (alias <code>last</code>).</li>
<li><code>pagination.lastPageHref</code> is the same, but omits <code>index.html</code> at end.</li>
<li><code>pagination.pageLinks</code> holds an array of all the page links (alias <code>links</code>).</li>
<li><code>pagination.href</code> holds an object with keys
&quot;previous&quot;, &quot;next&quot;, &quot;first&quot;, and &quot;last&quot; whose values are those hrefs.</li>
<li><code>pagination.hrefs</code> holds an array of all the page hrefs.</li>
</ul>
<p>The URL for each page is <code>/{pagination.data}/{zero-based-index}</code>.
The URL for the first page page is <code>/{data-name}</code>, omitting an index.
The URL <code>/{data-name}/0</code> is not valid.</p>
<p><code>pagination.items</code> holds the current page item when the size is 1
or an array of the current page items when size is greater than 1.
To add an alias for this add an <code>alias</code> property
to the <code>pagination</code> front matter.
For example:</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">pagination</span><span class="token punctuation">:</span><br>  <span class="token punctuation">...</span><br>  <span class="token key atrule">alias</span><span class="token punctuation">:</span> items</code></pre>
<p>With this alias in place, we can iterate over <code>items</code>
instead of <code>pagination.items</code> to render all the items on the current page.</p>
<p>To display &quot;Page m of n&quot;:</p>
<pre class="language-liquid"><code class="language-liquid"><span class="token operator">&lt;</span>div<span class="token operator">></span><br>  Page {{pagination.pageNumber <span class="token operator">+</span> <span class="token number">1</span>}} of {{pagination.pages.length}}<br><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span></code></pre>
<p>To render links to the first, previous, next, and last pages
so each is only rendered when it makes sense:</p>
<pre class="language-liquid"><code class="language-liquid"><span class="token operator">&lt;</span>nav class<span class="token operator">=</span>"pagination"<span class="token operator">></span><br>  <span class="token operator">&lt;</span>ol<span class="token operator">></span><br>    {<span class="token operator">%</span> <span class="token keyword">if</span> pagination.pageNumber <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">%</span>}<br>      <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>a href<span class="token operator">=</span>"{{pagination.href.first}}"<span class="token operator">></span>First<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><br>    {<span class="token operator">%</span> <span class="token keyword">endif</span> <span class="token operator">%</span>}<br>    {<span class="token operator">%</span> <span class="token keyword">if</span> pagination.href.previous <span class="token operator">%</span>}<br>      <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>a href<span class="token operator">=</span>"{{pagination.href.previous}}"<span class="token operator">></span>Prev<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><br>    {<span class="token operator">%</span> <span class="token keyword">endif</span> <span class="token operator">%</span>}<br>    {<span class="token operator">%</span> <span class="token keyword">if</span> pagination.href.next <span class="token operator">%</span>}<br>      <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>a href<span class="token operator">=</span>"{{pagination.href.next}}"<span class="token operator">></span>Next<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><br>    {<span class="token operator">%</span> <span class="token keyword">endif</span> <span class="token operator">%</span>}<br>    {<span class="token operator">%</span> <span class="token keyword">if</span> pagination.pageNumber <span class="token operator">&lt;</span> pagination.pages.length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">%</span>}<br>      <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>a href<span class="token operator">=</span>"{{pagination.href.last}}"<span class="token operator">></span>Last<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><br>    {<span class="token operator">%</span> <span class="token keyword">endif</span> <span class="token operator">%</span>}<br>  <span class="token operator">&lt;</span><span class="token operator">/</span>ol<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">></span></code></pre>
<p>To render links to all the pages except the current by number:</p>
<pre class="language-liquid"><code class="language-liquid"><span class="token operator">&lt;</span>nav class<span class="token operator">=</span>"pagination"<span class="token operator">></span><br>  <span class="token operator">&lt;</span>ol<span class="token operator">></span><br>    {<span class="token operator">%</span> <span class="token keyword">for</span> href <span class="token keyword">in</span> pagination.hrefs <span class="token operator">%</span>}<br>      {<span class="token operator">%</span><span class="token keyword">if</span> loop.index0 <span class="token operator">!=</span><span class="token operator">=</span> pagination.pageNumber <span class="token operator">%</span>}<br>        <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token operator">&lt;</span>a href<span class="token operator">=</span>"{{href}}"<span class="token operator">></span>Page {{ loop.index }}<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span><br>      {<span class="token operator">%</span> <span class="token keyword">endif</span> <span class="token operator">%</span>}<br>    {<span class="token operator">%</span> <span class="token keyword">endfor</span> <span class="token operator">%</span>}<br>  <span class="token operator">&lt;</span><span class="token operator">/</span>ol<span class="token operator">></span><br><span class="token operator">&lt;</span><span class="token operator">/</span>nav<span class="token operator">></span></code></pre>
<p>Note that Nunjucks provides the variable <code>loop</code> that holds
an object with the properties <code>index</code> (1-based) and <code>index0</code> (0-based).
These hold the current loop index.</p>
<p>To style the anchor tags as buttons:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.pagination</span> <span class="token punctuation">{</span><br>  <span class="token property">background-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.pagination ol</span> <span class="token punctuation">{</span><br>  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span><br>  <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 0.5rem 0<span class="token punctuation">;</span> <span class="token comment">/* to match "a" padding below */</span><br><span class="token punctuation">}</span><br><br><span class="token selector">.pagination a</span> <span class="token punctuation">{</span><br>  <span class="token property">border</span><span class="token punctuation">:</span> solid gray 1px<span class="token punctuation">;</span><br>  <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span><br>  <span class="token property">padding</span><span class="token punctuation">:</span> 0.5rem<span class="token punctuation">;</span><br>  <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>To style the anchor for the current page differently that the others,
define a CSS rule for <code>a.current</code> and
set the <code>class</code> on the <code>a</code> elements as follows:</p>
<pre class="language-liquid"><code class="language-liquid"><span class="token operator">&lt;</span>a<br>  class<span class="token operator">=</span>"{{'current' <span class="token keyword">if</span> loop.index0 <span class="token operator">==</span><span class="token operator">=</span> pagination.pageNumber <span class="token keyword">else</span> ''}}"<br>  href<span class="token operator">=</span>"{{href}}"<br><span class="token operator">></span></code></pre>
<p>To paginate data in reverse order,
add the <code>reverse</code> property to the <code>pagination</code> front matter.</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">pagination</span><span class="token punctuation">:</span><br>  <span class="token punctuation">...</span><br>  <span class="token key atrule">reverse</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code></pre>
<p>When <code>data</code> is an object rather than an array,
the items will be keys instead of items.
To change this so the items are the property values,
add the <code>resolve</code> property to the <code>pagination</code> front matter.</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">pagination</span><span class="token punctuation">:</span><br>  <span class="token punctuation">...</span><br>  <span class="token key atrule">resolve</span><span class="token punctuation">:</span> values</code></pre>
<p>To produce different data to be paginated from existing data,
use the <code>before</code> front matter property whose value is
a JavaScript function that takes the data and returns new data.
This can create new data to paginate by filtering, sort, and transforming.
Using this requires all the front matter
to be converted from YAML to JavaScript.
For example, the following filters the employees
so only those age 50 and older are retained
and it makes their names all uppercase:</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token punctuation">---</span>js<br><span class="token punctuation">{</span><br>  <span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">'employees-layout.njk'</span><span class="token punctuation">,</span><br>  <span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">'Employees'</span><span class="token punctuation">,</span><br>  <span class="token key atrule">pagination</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><br>    <span class="token key atrule">data</span><span class="token punctuation">:</span> <span class="token string">'employees'</span><span class="token punctuation">,</span><br>    <span class="token key atrule">size</span><span class="token punctuation">:</span> <span class="token number">7</span><span class="token punctuation">,</span><br>    <span class="token key atrule">alias</span><span class="token punctuation">:</span> <span class="token string">'items'</span><span class="token punctuation">,</span><br>    before(employees) <span class="token punctuation">{</span><br>      return employees.<br>        filter(emp =<span class="token punctuation">></span> emp.employee_age <span class="token punctuation">></span>= 50).<br>        map(emp =<span class="token punctuation">></span> (<span class="token punctuation">{</span><br>          <span class="token punctuation">...</span>emp<span class="token punctuation">,</span><br>          <span class="token key atrule">employee_name</span><span class="token punctuation">:</span> emp.employee_name.toUpperCase()<br>        <span class="token punctuation">}</span>));<br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token punctuation">---</span></code></pre>
<p>To change the paths of the files produced for each page, specify a permalink.
For example, if the file <code>employees.njk</code> uses pagination then
it would normally generate files like <code>_site/employees/2/index.html</code>
where 2 is a page number.
To change this so it generates files like
<code>_site/workers/group-2/index.html</code>, add the following front matter:</p>
<pre class="language-yaml"><code class="language-yaml"><span class="token key atrule">permalink</span><span class="token punctuation">:</span> <span class="token string">'workers/group-/index.html'</span></code></pre>
<p>When a template uses pagination and gets data from a REST service
as shown above, the REST service is invoked once,
then again for each page.
So if pagination results in three pages,
there will be four calls to the REST service.
TODO: Why is this?
TODO: See the issue you created about pagination and .11ty.js files
TODO: at https://github.com/11ty/eleventy/issues/919.</p>

      </section>
    </main>
    <footer>
      &copy; R. Mark Volkmann, 2020
    </footer>
  </body>
</html>